---
import { Icon } from 'astro-icon/components'

interface Props {
    name: string
    description: string | null
    language: string | null
    stars: number
    url: string
}

const { name, description, language, stars, url } = Astro.props

const getLanguageColor = (lang: string | null) => {
    const colors: Record<string, string> = {
        TypeScript: '#3178c6',
        Nix: '#7e7eff',
        Astro: '#ff5d01',
        HTML: '#e34c26',
        Lua: '#000080',
    }
    return colors[lang || ''] || '#6b7280'
}
---

<a
    href={url}
    target="_blank"
    rel="noopener noreferrer"
    class="glass-card glow-effect p-6 rounded-xl hover:scale-[1.02] transition-all duration-300 group block"
>
    <div class="flex items-start justify-between gap-4">
        <div class="flex-1 min-w-0">
            <h3
                class="text-xl font-display font-semibold text-zinc-100 group-hover:text-primary transition-colors truncate"
            >
                {name}
            </h3>
            {
                description && (
                    <p class="text-zinc-400 text-sm mt-2 line-clamp-2">
                        {description}
                    </p>
                )
            }
        </div>
        <Icon
            name="mdi:open-in-new"
            class="w-5 h-5 text-zinc-500 group-hover:text-primary transition-colors flex-shrink-0 mt-1"
        />
    </div>
    <div class="flex items-center gap-4 mt-4 pt-4 border-t border-border">
        {
            language && (
                <div class="flex items-center gap-2">
                    <span
                        class="w-2.5 h-2.5 rounded-full"
                        style={`background-color: ${getLanguageColor(language)}`}
                    />
                    <span class="text-sm text-zinc-500">{language}</span>
                </div>
            )
        }
        {
            stars > 0 && (
                <div class="flex items-center gap-1.5 text-zinc-500">
                    <Icon name="mdi:star" class="w-4 h-4" />
                    <span class="text-sm">{stars}</span>
                </div>
            )
        }
        <div class="ml-auto flex items-center gap-1.5 text-zinc-500">
            <Icon name="mdi:github" class="w-4 h-4" />
            <span class="text-sm">GitHub</span>
        </div>
    </div>
</a>
